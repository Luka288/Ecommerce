import{a as T}from"./chunk-CWPM2VRP.js";import{a as j}from"./chunk-AC3Y6EHC.js";import{a as E}from"./chunk-4GTL5XND.js";import{r as W}from"./chunk-C23PGWET.js";import{k as b,l as w,o as I}from"./chunk-OMOQWELU.js";import{$b as u,Hb as s,Ib as S,Jb as g,Mb as y,Na as M,Qa as r,ha as l,hb as d,jb as m,la as f,nb as x,rb as o,sb as a,tb as _,ub as O,va as h,wa as P,wb as v,xb as p}from"./chunk-KZ3HFMOA.js";function k(t,e){t&1&&(o(0,"div",0),_(1,"ngx-cube-loader",2),o(2,"h1"),s(3,"LOADING..."),a()())}function z(t,e){t&1&&_(0,"img",3)}function D(t,e){if(t&1&&_(0,"img",15),t&2){let n=p().$implicit,i=p(4);m("src",i.productThumbnails[n.productId],M)}}function F(t,e){if(t&1){let n=O();o(0,"div",9),d(1,D,1,1,"img",10),o(2,"div",11)(3,"div",12)(4,"p"),s(5),a(),o(6,"p"),s(7),a()(),o(8,"div",13)(9,"p"),s(10),a(),o(11,"a",14),v("click",function(){let c=h(n).$implicit,C=p(4);return P(C.removeOneItem(c.productId))}),s(12,"Remove"),a()()()()}if(t&2){let n=e.$implicit,i=p(4);r(),m("ngIf",i.productThumbnails[n.productId]),r(4),S(i.titleSetMap.get(n.productId)),r(2),g("Price: ",n.beforeDiscountPrice,""),r(3),g("Product quantity: ",n.quantity,"")}}function L(t,e){if(t&1&&(o(0,"div",7),d(1,F,13,4,"div",8),a()),t&2){let n=p(3);r(),m("ngForOf",n.display.products)}}function N(t,e){if(t&1&&(o(0,"div",16)(1,"a",17),s(2,"Pay"),a(),o(3,"h3"),s(4),a(),o(5,"h3"),s(6),a()()),t&2){let n=p(3);r(4),g("Total price : ",n.display.total.price.current,""),r(2),g("Total Items: ",n.display.total.products,"")}}function V(t,e){if(t&1&&(d(0,L,2,1,"div",4),o(1,"div",5),d(2,N,7,2,"div",6),a()),t&2){let n=p(2);m("ngIf",n.display),r(2),m("ngIf",n.display)}}function $(t,e){if(t&1&&(o(0,"section",1),d(1,z,1,0,"img",3)(2,V,3,2),a()),t&2){let n=p();r(),x(!n.display||!n.display.products.length?1:2)}}var Q=(()=>{let e=class e{constructor(){this.cart=l(E),this.singleProductService=l(j),this.changeDetector=l(u),this.alerts=l(W),this.ref=l(u),this.forImg=null,this.display=null,this.productThumbnails={},this.titleSetMap=new Map,this.isLoading=!0}ngOnInit(){this.getProduct()}getProduct(){this.cart.getCart()?.subscribe(i=>{this.display=i,this.display?.products.length&&(this.titleSetMap.clear(),this.display.products.forEach(c=>{this.getImg(c.productId),this.changeDetector.markForCheck()})),this.isLoading=!1})}getImg(i){this.singleProductService.loadProduct(i).subscribe(c=>{this.productThumbnails[i]=c.thumbnail,this.titleSetMap.set(i,c.title)})}removeOneItem(i){this.cart.deleteItem(i)?.subscribe(c=>{this.alerts.toast("Item removed","success","green"),this.getProduct(),console.log(c)})}};e.\u0275fac=function(c){return new(c||e)},e.\u0275cmp=f({type:e,selectors:[["app-cart-page"]],standalone:!0,features:[y],decls:3,vars:1,consts:[[1,"loading"],[1,"mainWrapper"],["colorSet","cyan",1,"customLoader"],["src","https://nosups.co.za/modules/products/uploads/no-product.png","alt","",1,"noItems"],["class","productsContainer",4,"ngIf"],[1,"purchaseSection"],["class","upperSide",4,"ngIf"],[1,"productsContainer"],["class","items",4,"ngFor","ngForOf"],[1,"items"],["alt","",3,"src",4,"ngIf"],[1,"infos"],[1,"priceTitle"],[1,"otherInfo"],[3,"click"],["alt","",3,"src"],[1,"upperSide"],["href",""]],template:function(c,C){c&1&&(o(0,"main"),d(1,k,4,0,"div",0)(2,$,3,1,"section",1),a()),c&2&&(r(),x(C.isLoading?1:2))},dependencies:[I,b,w,T],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%}main[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]{padding-top:10%;width:100%;height:100%;display:flex;justify-content:center}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .noItems[_ngcontent-%COMP%]{height:350px}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]{width:35%;height:auto;display:flex;flex-wrap:wrap;align-items:center;flex-direction:column;gap:15px}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{display:flex;width:100%;max-width:500px;gap:10px;background-color:#f8f8ff;border-radius:3px;box-shadow:-1px -1px 9px -5px #0000004a;-webkit-box-shadow:-1px -1px 9px -5px rgba(0,0,0,.29);-moz-box-shadow:-1px -1px 9px -5px rgba(0,0,0,.29)}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:contain}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .discountedPrice[_ngcontent-%COMP%]{color:red}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .priceTitle[_ngcontent-%COMP%]{display:flex;flex-direction:column}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .otherInfo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;cursor:pointer}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .purchaseSection[_ngcontent-%COMP%]{width:650px;height:300px;background-color:#f8dca8;display:flex;text-align:center;justify-content:center;flex-direction:column;align-items:center;border:1px solid wheat}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .purchaseSection[_ngcontent-%COMP%]   .upperSide[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:50px}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .purchaseSection[_ngcontent-%COMP%]   .upperSide[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100px;height:50px;font-size:26px;font-weight:400;display:flex;justify-content:center;align-items:center;border-radius:4px;background-color:#f8ba47;text-decoration:none;color:#fff}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .bottomSide[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}@media screen and (max-width: 1024px){main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .purchaseSection[_ngcontent-%COMP%]{position:fixed;box-sizing:border-box;bottom:0;left:0;width:100%;height:65px;max-height:65px;z-index:1100}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .purchaseSection[_ngcontent-%COMP%]   .upperSide[_ngcontent-%COMP%]{flex-direction:row}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]{width:100%}}@media (max-width: 425px){main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .purchaseSection[_ngcontent-%COMP%]{position:fixed;box-sizing:border-box;bottom:0;left:0;width:100%;height:65px;max-height:65px;z-index:1100}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .purchaseSection[_ngcontent-%COMP%]   .upperSide[_ngcontent-%COMP%]{flex-direction:row}}"]});let t=e;return t})();export{Q as default};
