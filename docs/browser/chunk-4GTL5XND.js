import{a,b as m,m as y,r as $,s as C}from"./chunk-C23PGWET.js";import{Z as d,ba as f,f as i,g as p,h as l,ha as h,p as u}from"./chunk-KZ3HFMOA.js";var I=(()=>{var s;let o=class o{constructor(){p(this,s);this.http=h(m),this.auth=h(C),this.alert=h($),this.url=y,l(this,s,new u(null)),this.cartDisplay$=i(this,s).asObservable(),this.isCartCreated=!1}get cartDisplay(){return i(this,s).value}set cartDisplay(t){i(this,s).next(t)}createCart(t,e){let r=this.auth.refreshToken;if(r){let n=new a({Authorization:`Bearer ${r}`,"Content-Type":"application/json"});return this.alert.toast("Product added","success","green"),this.http.post(`${this.url}/shop/cart/product`,{id:t,quantity:e},{headers:n})}else return console.log("error"),null}getCart(){let t=this.auth.refreshToken;if(t){let e=new a({Authorization:`Bearer ${t}`,"Content-Type":"application/json"});return this.http.get(`${this.url}/shop/cart`,{headers:e}).pipe(d(r=>{this.cartDisplay=r}))}else return null}updateCart(t,e=1){let r=this.auth.refreshToken;if(r){let n=new a({accept:"application/json",Authorization:`Bearer ${r}`,"Content-Type":"application/json"});return this.alert.toast("Product added","success","green"),this.http.patch(`${this.url}/shop/cart/product`,{id:t,quantity:e},{headers:n})}else return null}clearCart(){let t=this.auth.refreshToken;if(t){let e=new a({Authorization:`Bearer ${t}`,"Content-Type":"application/json"});return this.alert.toast("Items has been removed","success","green"),this.http.delete(`${this.url}/shop/cart`,{headers:e})}return null}deleteItem(t){let e=this.auth.refreshToken;if(e){let r=new a({accept:"application/json",Authorization:`Bearer ${e}`,"Content-Type":"application/json"}),n={id:t};return this.http.delete(`${this.url}/shop/cart/product`,{body:n,headers:r})}else return console.log("error from cart service deleteItem()")}imgCartItem(t){return this.http.get(`https://api.everrest.educata.dev/shop/products/id/${t}`)}};s=new WeakMap,o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=f({token:o,factory:o.\u0275fac,providedIn:"root"});let c=o;return c})();export{I as a};
