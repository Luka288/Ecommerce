import{a as k}from"./chunk-FZBINVQW.js";import{a as z}from"./chunk-NLCOH7YT.js";import{a as j}from"./chunk-M7S7FXHD.js";import{f as E}from"./chunk-5PI7YWHP.js";import"./chunk-L5CZSWL3.js";import{Fb as s,Gb as b,Hb as g,I as u,Kb as w,La as y,Oa as a,Yb as x,Z as h,fb as d,ga as m,hb as l,ka as P,lb as f,pb as o,pc as I,qb as c,qc as T,rb as C,sb as v,ta as M,tc as W,ua as O,ub as S,vb as p}from"./chunk-OEXLNGRT.js";function V(t,i){t&1&&(o(0,"div",0),C(1,"ngx-cube-loader",3),o(2,"h1"),s(3,"LOADING..."),c()())}function D(t,i){t&1&&(o(0,"div",1)(1,"h1"),s(2,"You must verify your email first"),c()())}function F(t,i){if(t&1&&d(0,D,3,0,"div",4),t&2){let e=p();l("ngIf",!e.checkVerify)}}function L(t,i){t&1&&C(0,"img",5)}function N(t,i){if(t&1&&C(0,"img",17),t&2){let e=p().$implicit,n=p(4);l("src",n.productThumbnails[e.productId],y)}}function $(t,i){if(t&1){let e=v();o(0,"div",11),d(1,N,1,1,"img",12),o(2,"div",13)(3,"div",14)(4,"p"),s(5),c(),o(6,"p"),s(7),c()(),o(8,"div",15)(9,"p"),s(10),c(),o(11,"a",16),S("click",function(){let r=M(e).$implicit,_=p(4);return O(_.removeOneItem(r.productId))}),s(12,"Remove"),c()()()()}if(t&2){let e=i.$implicit,n=p(4);a(),l("ngIf",n.productThumbnails[e.productId]),a(4),b(n.titleSetMap.get(e.productId)),a(2),g("Price: ",e.beforeDiscountPrice,""),a(3),g("Product quantity: ",e.quantity,"")}}function q(t,i){if(t&1&&(o(0,"div",9),d(1,$,13,4,"div",10),c()),t&2){let e=p(3);a(),l("ngForOf",e.display.products)}}function A(t,i){if(t&1&&(o(0,"div",18)(1,"a",19),s(2,"Pay"),c(),o(3,"h3"),s(4),c(),o(5,"h3"),s(6),c()()),t&2){let e=p(3);a(4),g("Total price : ",e.display.total.price.current,""),a(2),g("Total Items: ",e.display.total.products,"")}}function R(t,i){if(t&1&&(d(0,q,2,1,"div",6),o(1,"div",7),d(2,A,7,2,"div",8),c()),t&2){let e=p(2);l("ngIf",e.display),a(2),l("ngIf",e.display)}}function U(t,i){if(t&1&&(o(0,"section",2),d(1,L,1,0,"img",5)(2,R,3,2),c()),t&2){let e=p();a(),f(!e.display||!e.display.products.length?1:2)}}var et=(()=>{let i=class i{constructor(){this.cart=m(j),this.singleProductService=m(z),this.changeDetector=m(x),this.alerts=m(E),this.ref=m(x),this.forImg=null,this.display=null,this.productThumbnails={},this.titleSetMap=new Map,this.isLoading=!0,this.checkVerify=!1}ngOnInit(){this.getProduct()}getProduct(){this.cart.getCart()?.pipe(h(n=>{this.display=n,this.display?.products.length&&(this.titleSetMap.clear(),this.display.products.forEach(r=>{this.getImg(r.productId)}),this.changeDetector.markForCheck()),this.checkVerify=!0,this.isLoading=!1}),u(n=>(console.log("Error",n.error.error),n.error.error==="User needs to verify email"&&(this.checkVerify=!1,this.isLoading=!1),"error"))).subscribe()}getImg(n){this.singleProductService.loadProduct(n).subscribe(r=>{this.productThumbnails[n]=r.thumbnail,this.titleSetMap.set(n,r.title)})}removeOneItem(n){this.cart.deleteItem(n)?.subscribe(r=>{this.alerts.toast("Item removed","success","green"),this.getProduct(),console.log(r)})}};i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=P({type:i,selectors:[["app-cart-page"]],standalone:!0,features:[w],decls:4,vars:1,consts:[[1,"loading"],[1,"verify"],[1,"mainWrapper"],["colorSet","cyan",1,"customLoader"],["class","verify",4,"ngIf"],["src","https://nosups.co.za/modules/products/uploads/no-product.png","alt","",1,"noItems"],["class","productsContainer",4,"ngIf"],[1,"purchaseSection"],["class","upperSide",4,"ngIf"],[1,"productsContainer"],["class","items",4,"ngFor","ngForOf"],[1,"items"],["alt","",3,"src",4,"ngIf"],[1,"infos"],[1,"priceTitle"],[1,"otherInfo"],[3,"click"],["alt","",3,"src"],[1,"upperSide"],["href",""]],template:function(r,_){r&1&&(o(0,"main"),d(1,V,4,0,"div",0)(2,F,1,1,"div",1)(3,U,3,1,"section",2),c()),r&2&&(a(),f(_.isLoading?1:_.checkVerify?3:2))},dependencies:[W,I,T,k],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%}main[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]{padding-top:10%;width:100%;height:100%;display:flex;justify-content:center}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .noItems[_ngcontent-%COMP%]{height:350px}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]{width:35%;height:auto;display:flex;flex-wrap:wrap;align-items:center;flex-direction:column;gap:15px}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{display:flex;width:100%;max-width:500px;gap:10px;background-color:#f8f8ff;border-radius:3px;box-shadow:-1px -1px 9px -5px #0000004a;-webkit-box-shadow:-1px -1px 9px -5px rgba(0,0,0,.29);-moz-box-shadow:-1px -1px 9px -5px rgba(0,0,0,.29)}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:contain}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .discountedPrice[_ngcontent-%COMP%]{color:red}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .priceTitle[_ngcontent-%COMP%]{display:flex;flex-direction:column}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .otherInfo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;cursor:pointer}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .purchaseSection[_ngcontent-%COMP%]{width:650px;height:300px;background-color:#f8dca8;display:flex;text-align:center;justify-content:center;flex-direction:column;align-items:center;border:1px solid wheat}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .purchaseSection[_ngcontent-%COMP%]   .upperSide[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:50px}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .purchaseSection[_ngcontent-%COMP%]   .upperSide[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100px;height:50px;font-size:26px;font-weight:400;display:flex;justify-content:center;align-items:center;border-radius:4px;background-color:#f8ba47;text-decoration:none;color:#fff}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .bottomSide[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}@media screen and (max-width: 1024px){main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .purchaseSection[_ngcontent-%COMP%]{position:fixed;box-sizing:border-box;bottom:0;left:0;width:100%;height:65px;max-height:65px;z-index:1100}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .purchaseSection[_ngcontent-%COMP%]   .upperSide[_ngcontent-%COMP%]{flex-direction:row}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .productsContainer[_ngcontent-%COMP%]{width:100%}}@media (max-width: 425px){main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .purchaseSection[_ngcontent-%COMP%]{position:fixed;box-sizing:border-box;bottom:0;left:0;width:100%;height:65px;max-height:65px;z-index:1100}main[_ngcontent-%COMP%]   section.mainWrapper[_ngcontent-%COMP%]   .purchaseSection[_ngcontent-%COMP%]   .upperSide[_ngcontent-%COMP%]{flex-direction:row}}"]});let t=i;return t})();export{et as default};
