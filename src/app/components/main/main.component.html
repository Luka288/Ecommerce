<main>
  <section class="discountedProducts">
    <div class="discountedSection">
      <div class="title">
        <h1>Discounted Products</h1>
      </div>
      <div class="sectionCards">
        <div
          class="discountedCard"
          *ngFor="let product of discounted?.products"
        >
          <img [src]="product.thumbnail" [alt]="product.title" />
          <h4 class="productPrice">
            <s>{{ product.price.beforeDiscount }}</s>
            <span class="discounted">{{ product.price.current }}</span>
            {{ product.price.currency }}
          </h4>
          <p>{{ product.title }}</p>
          <button class="cart">Add to cart</button>
          <a routerLink="/product/id/{{ product._id }}">View Product</a>
        </div>
      </div>
    </div>
  </section>

  <section class="shopProducts">
    <div class="upperContainer">
      <div class="wrapper">
        <div class="categories">
          <a (click)="getCategory(2, 10)">Phones</a>
          <a>Laptops</a>
        </div>
      </div>
    </div>
    <div class="mainProducts">
      @if (categoryLaptop) {
      <div class="productCard" *ngFor="let product of categoryLaptop?.products">
        <img [src]="product.thumbnail" [alt]="product.title" />
        <h4 class="productPrice">
          @if(product.price.discountPercentage){
          <s>{{ product.price.beforeDiscount }}</s
          ><span class="discounted">{{ product.price.current }}</span>
          {{ product.price.currency }}
          }@else {
          {{ product.price.current }}{{ product.price.currency }}
          }
        </h4>
        <p>
          {{ product.title }}
        </p>
        <button class="cart">Add to cart</button>
        <a routerLink="/product/id/{{ product._id }}" class="viewProduct"
          >View Product</a
        >
      </div>
      }@else {
      <div class="productCard" *ngFor="let product of display?.products">
        <img [src]="product.thumbnail" [alt]="product.title" />
        <h4 class="productPrice">
          @if(product.price.discountPercentage){
          <s>{{ product.price.beforeDiscount }}</s
          ><span class="discounted">{{ product.price.current }}</span>
          {{ product.price.currency }}
          }@else {
          {{ product.price.current }}{{ product.price.currency }}
          }
        </h4>
        <p>
          {{ product.title }}
        </p>
        <button class="cart">Add to cart</button>
        <a routerLink="/product/id/{{ product._id }}" class="viewProduct"
          >View Product</a
        >
      </div>
      }
    </div>
    <nav aria-label="page">
      @if (categoryLaptop) {
      <ul class="pagination pagination-lg">
        <li
          class="page-item active"
          *ngFor="let page of [].constructor(totalPages); let i = index"
          [class.active]="this.config.pageIndex === i + 1"
        >
          <a
            class="page-link"
            href="#"
            (click)="categoryPagination(i + 1, $event)"
            >{{ i + 1 }}</a
          >
        </li>
      </ul>
      }@else if(!categoryLaptop) {
      <ul class="pagination pagination-lg">
        <li
          class="page-item active"
          *ngFor="let page of [].constructor(totalPages); let i = index"
          [class.active]="this.config.pageIndex === i + 1"
        >
          <a class="page-link" href="#" (click)="pageChange(i + 1, $event)">{{
            i + 1
          }}</a>
        </li>
      </ul>
      }
    </nav>
  </section>
</main>
